{"ast":null,"code":"import * as d3 from \"d3\";\nimport styles from \"../components/ForceGraph.css\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nconst ForceGraphGenerator = ({\n  container,\n  linksData,\n  nodesData,\n  nodeHoverTooltip\n}) => {\n  {\n    const links = linksData.map(d => Object.assign({}, d));\n    const nodes = nodesData.map(d => Object.assign({}, d));\n    const containerRect = container.getBoundingClientRect();\n    const height = containerRect.height;\n    const width = containerRect.width;\n    const color = () => {\n      return \"#9D79A0\";\n    };\n    const drag = simulation => {\n      const dragstarted = d => {\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      };\n      const dragged = d => {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      };\n      const dragended = d => {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      };\n      return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended);\n    };\n\n    // Add the tooltip element to the graph\n    const tooltip = document.querySelector(\"#graph-tooltip\");\n    if (!tooltip) {\n      const tooltipDiv = document.createElement(\"div\");\n      tooltipDiv.classList.add(styles.tooltip);\n      tooltipDiv.style.opacity = \"0\";\n      tooltipDiv.id = \"graph-tooltip\";\n      document.body.appendChild(tooltipDiv);\n    }\n    const div = d3.select(\"#graph-tooltip\");\n    const addTooltip = (hoverTooltip, d, x, y) => {\n      div.transition().duration(200).style(\"opacity\", 0.9);\n      div.html(hoverTooltip(d)).style(\"left\", `${x}px`).style(\"top\", `${y - 28}px`);\n    };\n    const removeTooltip = () => {\n      div.transition().duration(200).style(\"opacity\", 0);\n    };\n    const simulation = d3.forceSimulation(nodes).force(\"link\", d3.forceLink(links).id(d => d.id)).force(\"charge\", d3.forceManyBody().strength(-150)).force(\"x\", d3.forceX()).force(\"y\", d3.forceY());\n    const svg = d3.select(container).append(\"svg\").attr(\"viewBox\", [-width / 2, -height / 2, width, height]).call(d3.zoom().on(\"zoom\", function () {\n      svg.attr(\"transform\", d3.event.transform);\n    }));\n    const link = svg.append(\"g\").attr(\"stroke\", \"#999\").attr(\"stroke-opacity\", 0.6).selectAll(\"line\").data(links).join(\"line\").attr(\"stroke-width\", d => Math.sqrt(d.value));\n    const node = svg.append(\"g\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 2).selectAll(\"circle\").data(nodes).join(\"circle\").attr(\"r\", 12).attr(\"fill\", color).call(drag(simulation)).text(\"labels\");\n    const label = svg.append(\"g\").attr(\"class\", \"labels\").selectAll(\"text\").data(nodes).enter().append(\"text\").attr('text-anchor', 'middle').attr('dominant-baseline', 'central').text(d => {\n      return d.id;\n    }).call(drag(simulation));\n    label.on(\"mouseover\", d => {\n      addTooltip(nodeHoverTooltip, d, d3.event.pageX, d3.event.pageY);\n    }).on(\"mouseout\", () => {\n      removeTooltip();\n    });\n    simulation.on(\"tick\", () => {\n      //update link positions\n      link.attr(\"x1\", d => d.source.x).attr(\"y1\", d => d.source.y).attr(\"x2\", d => d.target.x).attr(\"y2\", d => d.target.y);\n\n      // update node positions\n      node.attr(\"cx\", d => d.x).attr(\"cy\", d => d.y);\n\n      // update label positions\n      label.attr(\"x\", d => {\n        return d.x;\n      }).attr(\"y\", d => {\n        return d.y;\n      });\n    });\n    return {\n      // destroy: () => {\n      //   simulation.stop();\n      // },\n      nodes: () => {\n        return svg.node();\n      }\n    };\n  }\n};\n_c = ForceGraphGenerator;\nexport default ForceGraphGenerator;\nvar _c;\n$RefreshReg$(_c, \"ForceGraphGenerator\");","map":{"version":3,"names":["d3","styles","ForceGraphGenerator","container","linksData","nodesData","nodeHoverTooltip","links","map","d","Object","assign","nodes","containerRect","getBoundingClientRect","height","width","color","drag","simulation","dragstarted","event","active","alphaTarget","restart","fx","x","fy","y","dragged","dragended","on","tooltip","document","querySelector","tooltipDiv","createElement","classList","add","style","opacity","id","body","appendChild","div","select","addTooltip","hoverTooltip","transition","duration","html","removeTooltip","forceSimulation","force","forceLink","forceManyBody","strength","forceX","forceY","svg","append","attr","call","zoom","transform","link","selectAll","data","join","Math","sqrt","value","node","text","label","enter","pageX","pageY","source","target","_c","$RefreshReg$"],"sources":["/Users/radhika.bajaj/Documents/GitHub/Knowledge-Graph-Frontend/src/components/ForceGraphGenerator.js"],"sourcesContent":["\nimport * as d3 from \"d3\";\nimport styles from \"../components/ForceGraph.css\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nconst ForceGraphGenerator = ({container, linksData, nodesData, nodeHoverTooltip}) => {\n  {\n    const links = linksData.map((d) => Object.assign({}, d));\n    const nodes = nodesData.map((d) => Object.assign({}, d));\n  \n    const containerRect = container.getBoundingClientRect();\n    const height = containerRect.height;\n    const width = containerRect.width;\n  \n    const color = () => { return \"#9D79A0\"; };\n  \n    const drag = (simulation) => {\n      const dragstarted = (d) => {\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      };\n  \n      const dragged = (d) => {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      };\n  \n      const dragended = (d) => {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      };\n  \n      return d3\n        .drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended);\n    };\n  \n    // Add the tooltip element to the graph\n    const tooltip = document.querySelector(\"#graph-tooltip\");\n    if (!tooltip) {\n      const tooltipDiv = document.createElement(\"div\");\n      tooltipDiv.classList.add(styles.tooltip);\n      tooltipDiv.style.opacity = \"0\";\n      tooltipDiv.id = \"graph-tooltip\";\n      document.body.appendChild(tooltipDiv);\n    }\n    const div = d3.select(\"#graph-tooltip\");\n  \n    const addTooltip = (hoverTooltip, d, x, y) => {\n      div\n        .transition()\n        .duration(200)\n        .style(\"opacity\", 0.9);\n      div\n        .html(hoverTooltip(d))\n        .style(\"left\", `${x}px`)\n        .style(\"top\", `${y - 28}px`);\n    };\n  \n    const removeTooltip = () => {\n      div\n        .transition()\n        .duration(200)\n        .style(\"opacity\", 0);\n    };\n  \n    const simulation = d3\n      .forceSimulation(nodes)\n      .force(\"link\", d3.forceLink(links).id(d => d.id))\n      .force(\"charge\", d3.forceManyBody().strength(-150))\n      .force(\"x\", d3.forceX())\n      .force(\"y\", d3.forceY());\n  \n    const svg = d3\n      .select(container)\n      .append(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\n      .call(d3.zoom().on(\"zoom\", function () {\n        svg.attr(\"transform\", d3.event.transform);\n      }));\n  \n    const link = svg\n      .append(\"g\")\n      .attr(\"stroke\", \"#999\")\n      .attr(\"stroke-opacity\", 0.6)\n      .selectAll(\"line\")\n      .data(links)\n      .join(\"line\")\n      .attr(\"stroke-width\", d => Math.sqrt(d.value));\n  \n    const node = svg\n      .append(\"g\")\n      .attr(\"stroke\", \"#fff\")\n      .attr(\"stroke-width\", 2)\n      .selectAll(\"circle\")\n      .data(nodes)\n      .join(\"circle\")\n      .attr(\"r\", 12)\n      .attr(\"fill\", color)\n      .call(drag(simulation))\n      .text(\"labels\");\n  \n    const label = svg.append(\"g\")\n      .attr(\"class\", \"labels\")\n      .selectAll(\"text\")\n      .data(nodes)\n      .enter()\n      .append(\"text\")\n      .attr('text-anchor', 'middle')\n      .attr('dominant-baseline', 'central')\n      .text(d => {return d.id;})\n      .call(drag(simulation));\n  \n    label.on(\"mouseover\", (d) => {\n      addTooltip(nodeHoverTooltip, d, d3.event.pageX, d3.event.pageY);\n    })\n      .on(\"mouseout\", () => {\n        removeTooltip();\n      });\n  \n    simulation.on(\"tick\", () => {\n      //update link positions\n      link\n        .attr(\"x1\", d => d.source.x)\n        .attr(\"y1\", d => d.source.y)\n        .attr(\"x2\", d => d.target.x)\n        .attr(\"y2\", d => d.target.y);\n  \n      // update node positions\n      node\n        .attr(\"cx\", d => d.x)\n        .attr(\"cy\", d => d.y);\n  \n      // update label positions\n      label\n        .attr(\"x\", d => { return d.x; })\n        .attr(\"y\", d => { return d.y; })\n    });\n  \n    return {\n      // destroy: () => {\n      //   simulation.stop();\n      // },\n      nodes: () => {\n        return svg.node();\n      }\n    };\n  }\n\n}\n\nexport default ForceGraphGenerator;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}