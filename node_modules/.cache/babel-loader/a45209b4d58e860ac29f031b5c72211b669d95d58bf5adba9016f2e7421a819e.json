{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar captor_1 = __importStar(require(\"./captor\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */function (_super) {\n  __extends(TouchCaptor, _super);\n  function TouchCaptor(container, renderer) {\n    var _this = _super.call(this, container, renderer) || this;\n    _this.enabled = true;\n    _this.isMoving = false;\n    _this.hasMoved = false;\n    _this.touchMode = 0; // number of touches down\n    _this.startTouchesPositions = [];\n    // Binding methods:\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.handleLeave = _this.handleLeave.bind(_this);\n    _this.handleMove = _this.handleMove.bind(_this);\n    // Binding events\n    container.addEventListener(\"touchstart\", _this.handleStart, false);\n    container.addEventListener(\"touchend\", _this.handleLeave, false);\n    container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n    container.addEventListener(\"touchmove\", _this.handleMove, false);\n    return _this;\n  }\n  TouchCaptor.prototype.kill = function () {\n    var container = this.container;\n    container.removeEventListener(\"touchstart\", this.handleStart);\n    container.removeEventListener(\"touchend\", this.handleLeave);\n    container.removeEventListener(\"touchcancel\", this.handleLeave);\n    container.removeEventListener(\"touchmove\", this.handleMove);\n  };\n  TouchCaptor.prototype.getDimensions = function () {\n    return {\n      width: this.container.offsetWidth,\n      height: this.container.offsetHeight\n    };\n  };\n  TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, touch, emitter) {\n    var mousePosition = touch || e.touches[0];\n    var mouseEvent = new MouseEvent(type, {\n      clientX: mousePosition.clientX,\n      clientY: mousePosition.clientY,\n      altKey: e.altKey,\n      ctrlKey: e.ctrlKey\n    });\n    mouseEvent.isFakeSigmaMouseEvent = true;\n    (emitter || this.container).dispatchEvent(mouseEvent);\n  };\n  TouchCaptor.prototype.handleStart = function (e) {\n    var _this = this;\n    if (!this.enabled) return;\n    // Prevent default to avoid default browser behaviors...\n    e.preventDefault();\n    // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n    if (e.touches.length === 1) this.dispatchRelatedMouseEvent(\"mousedown\", e);\n    var touches = (0, captor_1.getTouchesArray)(e.touches);\n    this.touchMode = touches.length;\n    this.startCameraState = this.renderer.getCamera().getState();\n    this.startTouchesPositions = touches.map(function (touch) {\n      return (0, captor_1.getPosition)(touch, _this.container);\n    });\n    this.lastTouches = touches;\n    this.lastTouchesPositions = this.startTouchesPositions;\n    // When there are two touches down, let's record distance and angle as well:\n    if (this.touchMode === 2) {\n      var _a = __read(this.startTouchesPositions, 2),\n        _b = _a[0],\n        x0 = _b.x,\n        y0 = _b.y,\n        _c = _a[1],\n        x1 = _c.x,\n        y1 = _c.y;\n      this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n      this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n    }\n    this.emit(\"touchdown\", (0, captor_1.getTouchCoords)(e, this.container));\n  };\n  TouchCaptor.prototype.handleLeave = function (e) {\n    if (!this.enabled) return;\n    // Prevent default to avoid default browser behaviors...\n    e.preventDefault();\n    // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n    if (e.touches.length === 0 && this.lastTouches && this.lastTouches.length) {\n      this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouches[0], document);\n      // ... and only click if no move was made\n      if (!this.hasMoved) {\n        this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouches[0]);\n      }\n    }\n    if (this.movingTimeout) {\n      this.isMoving = false;\n      clearTimeout(this.movingTimeout);\n    }\n    switch (this.touchMode) {\n      case 2:\n        if (e.touches.length === 1) {\n          this.handleStart(e);\n          e.preventDefault();\n          break;\n        }\n      /* falls through */\n      case 1:\n        // TODO\n        // Dispatch event\n        if (this.isMoving) {\n          var camera = this.renderer.getCamera();\n          var cameraState = camera.getState(),\n            previousCameraState = camera.getPreviousState() || {\n              x: 0,\n              y: 0\n            };\n          camera.animate({\n            x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n            y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y)\n          }, {\n            duration: TOUCH_INERTIA_DURATION,\n            easing: \"quadraticOut\"\n          });\n        }\n        this.hasMoved = false;\n        this.isMoving = false;\n        this.touchMode = 0;\n        break;\n    }\n    this.emit(\"touchup\", (0, captor_1.getTouchCoords)(e, this.container));\n  };\n  TouchCaptor.prototype.handleMove = function (e) {\n    var _a;\n    var _this = this;\n    if (!this.enabled) return;\n    // Prevent default to avoid default browser behaviors...\n    e.preventDefault();\n    // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n    if (e.touches.length === 1) this.dispatchRelatedMouseEvent(\"mousemove\", e);\n    var touches = (0, captor_1.getTouchesArray)(e.touches);\n    var touchesPositions = touches.map(function (touch) {\n      return (0, captor_1.getPosition)(touch, _this.container);\n    });\n    this.lastTouches = touches;\n    this.lastTouchesPositions = touchesPositions;\n    // If a move was initiated at some point and we get back to startpoint,\n    // we should still consider that we did move (which also happens after a\n    // multiple touch when only one touch remains in which case handleStart\n    // is recalled within handleLeave).\n    // Now, some mobile browsers report zero-distance moves so we also check that\n    // one of the touches did actually move from the origin position.\n    this.hasMoved || (this.hasMoved = touchesPositions.some(function (position, idx) {\n      var startPosition = _this.startTouchesPositions[idx];\n      return position.x !== startPosition.x || position.y !== startPosition.y;\n    }));\n    // If there was no move, do not trigger touch moves behavior\n    if (!this.hasMoved) {\n      return;\n    }\n    this.isMoving = true;\n    if (this.movingTimeout) clearTimeout(this.movingTimeout);\n    this.movingTimeout = window.setTimeout(function () {\n      _this.isMoving = false;\n    }, DRAG_TIMEOUT);\n    var camera = this.renderer.getCamera();\n    var startCameraState = this.startCameraState;\n    switch (this.touchMode) {\n      case 1:\n        {\n          var _b = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0]),\n            xStart = _b.x,\n            yStart = _b.y;\n          var _c = this.renderer.viewportToFramedGraph(touchesPositions[0]),\n            x = _c.x,\n            y = _c.y;\n          camera.setState({\n            x: startCameraState.x + xStart - x,\n            y: startCameraState.y + yStart - y\n          });\n          break;\n        }\n      case 2:\n        {\n          /**\n           * Here is the thinking here:\n           *\n           * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n           *    of the d'n'd and now\n           *\n           * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n           *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n           *    position of this same touch now\n           */\n          var newCameraState = {};\n          var _d = touchesPositions[0],\n            x0 = _d.x,\n            y0 = _d.y;\n          var _e = touchesPositions[1],\n            x1 = _e.x,\n            y1 = _e.y;\n          var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n          var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n          // 1.\n          var newRatio = camera.getBoundedRatio(startCameraState.ratio / ratioDiff);\n          newCameraState.ratio = newRatio;\n          newCameraState.angle = startCameraState.angle + angleDiff;\n          // 2.\n          var dimensions = this.getDimensions();\n          var touchGraphPosition = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0], {\n            cameraState: startCameraState\n          });\n          var smallestDimension = Math.min(dimensions.width, dimensions.height);\n          var dx = smallestDimension / dimensions.width;\n          var dy = smallestDimension / dimensions.height;\n          var ratio = newRatio / smallestDimension;\n          // Align with center of the graph:\n          var x = x0 - smallestDimension / 2 / dx;\n          var y = y0 - smallestDimension / 2 / dy;\n          // Rotate:\n          _a = __read([x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle), y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle)], 2), x = _a[0], y = _a[1];\n          newCameraState.x = touchGraphPosition.x - x * ratio;\n          newCameraState.y = touchGraphPosition.y + y * ratio;\n          camera.setState(newCameraState);\n          break;\n        }\n    }\n    this.emit(\"touchmove\", (0, captor_1.getTouchCoords)(e, this.container));\n  };\n  return TouchCaptor;\n}(captor_1.default);\nexports.default = TouchCaptor;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__createBinding","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__read","n","Symbol","iterator","i","r","ar","e","next","done","push","error","exports","captor_1","require","DRAG_TIMEOUT","TOUCH_INERTIA_RATIO","TOUCH_INERTIA_DURATION","TouchCaptor","_super","container","renderer","_this","enabled","isMoving","hasMoved","touchMode","startTouchesPositions","handleStart","bind","handleLeave","handleMove","addEventListener","kill","removeEventListener","getDimensions","width","offsetWidth","height","offsetHeight","dispatchRelatedMouseEvent","type","touch","emitter","mousePosition","touches","mouseEvent","MouseEvent","clientX","clientY","altKey","ctrlKey","isFakeSigmaMouseEvent","dispatchEvent","preventDefault","length","getTouchesArray","startCameraState","getCamera","getState","map","getPosition","lastTouches","lastTouchesPositions","_a","_b","x0","x","y0","y","_c","x1","y1","startTouchesAngle","Math","atan2","startTouchesDistance","sqrt","pow","emit","getTouchCoords","document","movingTimeout","clearTimeout","camera","cameraState","previousCameraState","getPreviousState","animate","duration","easing","touchesPositions","some","position","idx","startPosition","window","setTimeout","viewportToFramedGraph","xStart","yStart","setState","newCameraState","_d","_e","angleDiff","ratioDiff","hypot","newRatio","getBoundedRatio","ratio","angle","dimensions","touchGraphPosition","smallestDimension","min","dx","dy","cos","sin","default"],"sources":["/Users/radhika.bajaj/Documents/GitHub/Knowledge-Graph-Frontend/node_modules/sigma/core/captors/touch.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */ (function (_super) {\n    __extends(TouchCaptor, _super);\n    function TouchCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        _this.enabled = true;\n        _this.isMoving = false;\n        _this.hasMoved = false;\n        _this.touchMode = 0; // number of touches down\n        _this.startTouchesPositions = [];\n        // Binding methods:\n        _this.handleStart = _this.handleStart.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        // Binding events\n        container.addEventListener(\"touchstart\", _this.handleStart, false);\n        container.addEventListener(\"touchend\", _this.handleLeave, false);\n        container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n        container.addEventListener(\"touchmove\", _this.handleMove, false);\n        return _this;\n    }\n    TouchCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"touchstart\", this.handleStart);\n        container.removeEventListener(\"touchend\", this.handleLeave);\n        container.removeEventListener(\"touchcancel\", this.handleLeave);\n        container.removeEventListener(\"touchmove\", this.handleMove);\n    };\n    TouchCaptor.prototype.getDimensions = function () {\n        return {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        };\n    };\n    TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, touch, emitter) {\n        var mousePosition = touch || e.touches[0];\n        var mouseEvent = new MouseEvent(type, {\n            clientX: mousePosition.clientX,\n            clientY: mousePosition.clientY,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n        });\n        mouseEvent.isFakeSigmaMouseEvent = true;\n        (emitter || this.container).dispatchEvent(mouseEvent);\n    };\n    TouchCaptor.prototype.handleStart = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousedown\", e);\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        this.touchMode = touches.length;\n        this.startCameraState = this.renderer.getCamera().getState();\n        this.startTouchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouches = touches;\n        this.lastTouchesPositions = this.startTouchesPositions;\n        // When there are two touches down, let's record distance and angle as well:\n        if (this.touchMode === 2) {\n            var _a = __read(this.startTouchesPositions, 2), _b = _a[0], x0 = _b.x, y0 = _b.y, _c = _a[1], x1 = _c.x, y1 = _c.y;\n            this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n            this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n        }\n        this.emit(\"touchdown\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleLeave = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 0 && this.lastTouches && this.lastTouches.length) {\n            this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouches[0], document);\n            // ... and only click if no move was made\n            if (!this.hasMoved) {\n                this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouches[0]);\n            }\n        }\n        if (this.movingTimeout) {\n            this.isMoving = false;\n            clearTimeout(this.movingTimeout);\n        }\n        switch (this.touchMode) {\n            case 2:\n                if (e.touches.length === 1) {\n                    this.handleStart(e);\n                    e.preventDefault();\n                    break;\n                }\n            /* falls through */\n            case 1:\n                // TODO\n                // Dispatch event\n                if (this.isMoving) {\n                    var camera = this.renderer.getCamera();\n                    var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n                    camera.animate({\n                        x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                        y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n                    }, {\n                        duration: TOUCH_INERTIA_DURATION,\n                        easing: \"quadraticOut\",\n                    });\n                }\n                this.hasMoved = false;\n                this.isMoving = false;\n                this.touchMode = 0;\n                break;\n        }\n        this.emit(\"touchup\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleMove = function (e) {\n        var _a;\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousemove\", e);\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        var touchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouches = touches;\n        this.lastTouchesPositions = touchesPositions;\n        // If a move was initiated at some point and we get back to startpoint,\n        // we should still consider that we did move (which also happens after a\n        // multiple touch when only one touch remains in which case handleStart\n        // is recalled within handleLeave).\n        // Now, some mobile browsers report zero-distance moves so we also check that\n        // one of the touches did actually move from the origin position.\n        this.hasMoved || (this.hasMoved = touchesPositions.some(function (position, idx) {\n            var startPosition = _this.startTouchesPositions[idx];\n            return position.x !== startPosition.x || position.y !== startPosition.y;\n        }));\n        // If there was no move, do not trigger touch moves behavior\n        if (!this.hasMoved) {\n            return;\n        }\n        this.isMoving = true;\n        if (this.movingTimeout)\n            clearTimeout(this.movingTimeout);\n        this.movingTimeout = window.setTimeout(function () {\n            _this.isMoving = false;\n        }, DRAG_TIMEOUT);\n        var camera = this.renderer.getCamera();\n        var startCameraState = this.startCameraState;\n        switch (this.touchMode) {\n            case 1: {\n                var _b = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0]), xStart = _b.x, yStart = _b.y;\n                var _c = this.renderer.viewportToFramedGraph(touchesPositions[0]), x = _c.x, y = _c.y;\n                camera.setState({\n                    x: startCameraState.x + xStart - x,\n                    y: startCameraState.y + yStart - y,\n                });\n                break;\n            }\n            case 2: {\n                /**\n                 * Here is the thinking here:\n                 *\n                 * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n                 *    of the d'n'd and now\n                 *\n                 * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n                 *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n                 *    position of this same touch now\n                 */\n                var newCameraState = {};\n                var _d = touchesPositions[0], x0 = _d.x, y0 = _d.y;\n                var _e = touchesPositions[1], x1 = _e.x, y1 = _e.y;\n                var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n                var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n                // 1.\n                var newRatio = camera.getBoundedRatio(startCameraState.ratio / ratioDiff);\n                newCameraState.ratio = newRatio;\n                newCameraState.angle = startCameraState.angle + angleDiff;\n                // 2.\n                var dimensions = this.getDimensions();\n                var touchGraphPosition = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0], { cameraState: startCameraState });\n                var smallestDimension = Math.min(dimensions.width, dimensions.height);\n                var dx = smallestDimension / dimensions.width;\n                var dy = smallestDimension / dimensions.height;\n                var ratio = newRatio / smallestDimension;\n                // Align with center of the graph:\n                var x = x0 - smallestDimension / 2 / dx;\n                var y = y0 - smallestDimension / 2 / dy;\n                // Rotate:\n                _a = __read([\n                    x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle),\n                    y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle),\n                ], 2), x = _a[0], y = _a[1];\n                newCameraState.x = touchGraphPosition.x - x * ratio;\n                newCameraState.y = touchGraphPosition.y + y * ratio;\n                camera.setState(newCameraState);\n                break;\n            }\n        }\n        this.emit(\"touchmove\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    return TouchCaptor;\n}(captor_1.default));\nexports.default = TouchCaptor;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}